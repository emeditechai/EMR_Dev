@model EMR.Web.Models.ViewModels.DashboardViewModel
@{
    ViewData["Title"] = "Dashboard";
}

<div class="dashboard-page">
    <div class="d-flex justify-content-between align-items-center flex-wrap gap-2 mb-3">
        <div>
            <h1 class="dashboard-title mb-1">Dashboard Overview</h1>
            <p class="dashboard-subtitle mb-0">Welcome back, @Model.UserDisplayName! Here's what's happening today in @Model.CurrentBranchName.</p>
        </div>
        <a asp-controller="Account" asp-action="SelectBranch" class="btn btn-outline-primary"><i class="bi bi-arrow-repeat me-1"></i>Switch Branch</a>
    </div>

    <div class="row g-3 mb-4">
        <div class="col-12 col-md-6 col-xl-3">
            <div class="kpi-card kpi-blue">
                <div class="d-flex justify-content-between align-items-start mb-4">
                    <span>Total Patients</span>
                    <i class="bi bi-people-fill"></i>
                </div>
                <h2>@Model.TotalUsers</h2>
                <small>Registered users in EMR</small>
            </div>
        </div>
        <div class="col-12 col-md-6 col-xl-3">
            <div class="kpi-card kpi-red">
                <div class="d-flex justify-content-between align-items-start mb-4">
                    <span>OPD Visits</span>
                    <i class="bi bi-clipboard2-pulse-fill"></i>
                </div>
                <h2>@(Model.ActiveMappings + Model.TotalBranches)</h2>
                <small>Today consultation queue</small>
            </div>
        </div>
        <div class="col-12 col-md-6 col-xl-3">
            <div class="kpi-card kpi-yellow">
                <div class="d-flex justify-content-between align-items-start mb-4">
                    <span>IPD Admissions</span>
                    <i class="bi bi-hospital-fill"></i>
                </div>
                <h2>@Model.TotalBranches</h2>
                <small>Active branches admitting</small>
            </div>
        </div>
        <div class="col-12 col-md-6 col-xl-3">
            <div class="kpi-card kpi-green">
                <div class="d-flex justify-content-between align-items-start mb-4">
                    <span>Active Mappings</span>
                    <i class="bi bi-diagram-3-fill"></i>
                </div>
                <h2>@Model.ActiveMappings</h2>
                <small>User-branch assignments</small>
            </div>
        </div>
    </div>

    <div class="row g-3 mb-4">
        <div class="col-12 col-xl-8">
            <div class="dashboard-panel h-100">
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <h3 class="h5 m-0">Patient Flow Overview</h3>
                    <select class="form-select form-select-sm w-auto">
                        <option>Last 7 Days</option>
                        <option>Last 30 Days</option>
                    </select>
                </div>
                <div class="chart-placeholder">
                    <div class="chart-line"></div>
                    <div class="chart-line"></div>
                    <div class="chart-line"></div>
                    <div class="chart-line"></div>
                </div>
            </div>
        </div>
        <div class="col-12 col-xl-4">
            <div class="dashboard-panel h-100">
                <h3 class="h5 mb-3">Department Load</h3>
                <ul class="list-unstyled m-0 d-grid gap-3">
                    <li class="dept-item"><span>OPD</span><strong>@(Model.TotalUsers + 12)</strong></li>
                    <li class="dept-item"><span>IPD</span><strong>@(Model.ActiveMappings + 6)</strong></li>
                    <li class="dept-item"><span>Lab</span><strong>@(Model.TotalBranches + 3)</strong></li>
                    <li class="dept-item"><span>Pharmacy</span><strong>@(Model.TotalUsers + 4)</strong></li>
                </ul>
            </div>
        </div>
    </div>

    <div class="dashboard-panel">
        <div class="d-flex justify-content-between align-items-center mb-3">
            <h3 class="h5 m-0">Today's Checkouts</h3>
            <a class="link-primary text-decoration-none fw-semibold" href="#">View All</a>
        </div>
        <div class="table-responsive">
            <table class="table align-middle mb-0">
                <thead>
                    <tr>
                        <th>Patient ID</th>
                        <th>Name</th>
                        <th>Department</th>
                        <th>Doctor</th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>EMR-1021</td>
                        <td>Rohit Sharma</td>
                        <td>OPD</td>
                        <td>Dr. Mehta</td>
                        <td><span class="badge text-bg-success">Completed</span></td>
                    </tr>
                    <tr>
                        <td>EMR-1022</td>
                        <td>Anita Das</td>
                        <td>IPD</td>
                        <td>Dr. Khan</td>
                        <td><span class="badge text-bg-warning">In Progress</span></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
